{% extends 'base.html.twig' %}

{% block body %}

<div class="container">
  <div class="row">
    <div class="col-md-4 col-md-offset-4">
      {% for flash_message in app.session.flashBag.get('notice') %}
        <div class="flash-notice">
          {{ flash_message }}
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="row">
      <div class="col-md-6 col-md-offset-2">
        {% if projects is null or projects is empty %}
          <h4>No projects available</h4>
        {% else %}
          <table class="table table-hover table-responsive">
            <thead>
              <tr>
                <th>Project Name</th>
                <th>Budget</th>
                <th>Tasks</th>
              </tr>
            </thead>
            <tbody>
            {% for project in projects %}
              <tr>
                <td>{{ project.name }}</td>
                <td>{{ project.budget }}</td>
                <td><a href="{{ path('view_assignments', {'project_id':project.id}) }}">{{ 'Assignments'|trans }}</a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>

        {% if page > 1 and page <= max_page %}
          <li>
            <a href="{{ path('projects', {page: page-1 }) }}"><< Previous Page</a>
          </li>
        {% endif %}
        {% if page >= 1 and page < max_page %}
          <li>
            <a href="{{ path('projects', {page: page+1 }) }}">Next Page >> </a>
          </li>
        {% endif %}

      {% endif %}
    </div>
    <div class="col-md-3 col-md-offset-1">
      <div class="btn-group-vertical" role="group">
        <a class="btn btn-primary" href="{{ path('new_project') }}" role="button">Create Project...</a>
        <a class="btn btn-primary" href="{{ path('new_person') }}" role="button">Create Person...</a>
      </div>
  </div>
</div>

{% endblock %}
